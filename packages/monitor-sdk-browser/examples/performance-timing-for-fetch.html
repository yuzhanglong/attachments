<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Title</title>
  </head>
  <body>
    <script>
      fetch("https://disease.sh/v3/covid-19/historical/all?lastdays=all")
        .then(res => {
          const [progressStream, returnStream] = res.body.tee();
          const reader = progressStream.getReader();
          const log = () => {
            reader.read().then(({ value, done }) => {
              if (done) return;
              // 省略输出进度
              console.log(value.toString());
              log();
            });
          };
          log();
          return new Response(returnStream, { headers: res.headers });
        });
    </script>
  </body>
</html>
